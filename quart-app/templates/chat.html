{% extends "base.html" %}

{% block content %}
<div class="container-fluid h-100">
    <div class="row h-100">
        <!-- Sidebar -->
        <div class="col-md-3 col-lg-2 sidebar">
            <div class="d-flex flex-column h-100">
                <h5 class="sidebar-title">Chat Options</h5>
                
                <!-- GitHub Connection -->
                <div class="mb-3">
                    <button id="githubConnectBtn" class="btn btn-sm btn-outline-primary w-100">
                        <i class="bi bi-github"></i> Connect GitHub
                    </button>
                </div>
                
                <!-- Chat Actions -->
                <div class="dropdown mb-3">
                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle w-100" type="button" data-bs-toggle="dropdown">
                        <i class="bi bi-gear"></i> Chat Actions
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" id="chatStatsBtn">
                            <i class="bi bi-graph-up"></i> Statistics
                        </a></li>
                        <li><a class="dropdown-item" href="#" id="exportChatBtn">
                            <i class="bi bi-download"></i> Export Chat
                        </a></li>
                        <li><a class="dropdown-item" href="#" id="compressChatBtn">
                            <i class="bi bi-compress"></i> Compress History
                        </a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-danger" href="#" id="clearChatBtn">
                            <i class="bi bi-trash"></i> Clear Chat
                        </a></li>
                    </ul>
                </div>
                
                <!-- GitHub Repos (shown when connected) -->
                <div id="githubRepos" class="flex-grow-1 overflow-auto" style="display: none;">
                    <h6>Repositories</h6>
                    <div id="reposList"></div>
                </div>
            </div>
        </div>
        
        <!-- Chat Area -->
        <div class="col-md-9 col-lg-10 chat-area">
            <div class="chat-container">
                <div id="chatMessages" class="chat-messages"></div>
                <div id="typingIndicator" class="typing-indicator" style="display: none;">
                    <span></span><span></span><span></span>
                </div>
            </div>
            
            <div class="chat-input-container">
                <div class="input-group">
                    <textarea id="messageInput" class="form-control" placeholder="Type your message..." rows="1"></textarea>
                    <button id="sendButton" class="btn btn-primary">
                        <i class="bi bi-send"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modals -->
<!-- GitHub Connect Modal -->
<div class="modal fade" id="githubConnectModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Connect GitHub Account</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Enter your GitHub Personal Access Token to connect your repositories.</p>
                <input type="password" id="githubToken" class="form-control" placeholder="ghp_xxxxxxxxxxxx">
                <small class="text-muted">
                    <a href="https://github.com/settings/tokens/new" target="_blank">Create a new token</a> with 'repo' scope.
                </small>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="connectGithubBtn">Connect</button>
            </div>
        </div>
    </div>
</div>

<!-- Other modals (stats, compress, etc.) -->
<!-- ... -->

<script src="/static/js/utils.js"></script>
<script src="/static/js/github-integration.js"></script>
<script src="/static/js/chat.js"></script>
{% endblock %}